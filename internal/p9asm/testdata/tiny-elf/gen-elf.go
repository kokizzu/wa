// Copyright (C) 2025 武汉凹语言科技有限公司
// SPDX-License-Identifier: AGPL-3.0-or-later

//go:build ignore

package main

import (
	"os"
	"unsafe"
)

func main() {
	os.WriteFile("tiny.elf.bin",
		unsafe.Slice(
			(*byte)(unsafe.Pointer(unsafe.SliceData(data))),
			len(data)*2,
		),
		0777,
	)
}

var data = []uint16{
	// ELF header
	// magic      ,               , ... padding ...               ,
	0x457f, 0x464c, 0x0102, 0x0001, 0x0000, 0x0000, 0x0000, 0x0000,

	// exe, x86-64,               , entry 0x400078,
	0x0002, 0x003e, 0x0001, 0x0000, 0x0078, 0x0040, 0x0000, 0x0000,
	0x0040, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
	0x0000, 0x0000, 0x0040, 0x0038, 0x0001, 0x0000, 0x0000, 0x0000,

	// program header
	//            , r-w-x ,
	0x0001, 0x0000, 0x0007, 0x0000, 0x0078, 0x0000, 0x0000, 0x0000,
	0x0078, 0x0040, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
	0x0007, 0x0000, 0x0000, 0x0000, 0x0007, 0x0000, 0x0000, 0x0000,
	0x1000, 0x0000, 0x0000, 0x0000,

	// the program
	0x3c6a, 0x3158, 0x0fff, 0x0005,
}
