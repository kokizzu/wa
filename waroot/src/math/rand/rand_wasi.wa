// Copyright (C) 2024 武汉凹语言科技有限公司
// SPDX-License-Identifier: MIT

import (
	"errors"
	"runtime"
)

#wa:import wasi_snapshot_preview1 random_get
func wasi_random_get(buf: i32, bufLen: i32) => (errno: i32)

func getRandomData(r: []byte) => error {
	if wasi_random_get(runtime.WaBytesToPtr(r), i32(len(r))) != 0 {
		return errors.New("wasi_random_get failed")
	}
	return nil
}
